services:
  # Web Service - Flask 應用
  - type: web
    name: cinpos-boxoffice-web
    env: python
    region: singapore  # 選擇新加坡節點（離台灣較近）
    plan: free

    # 指定 web 應用的目錄
    rootDir: src/web/business/detail

    # 建置設定
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn -w 4 -b 0.0.0.0:$PORT app:app

    # 環境變數
    envVars:
      - key: FLASK_DEBUG
        value: false
      - key: SECRET_KEY
        generateValue: true
      - key: PYTHON_VERSION
        value: "3.11"

    # 健康檢查
    healthCheckPath: /

    # 自動部署設定
    autoDeploy: true
