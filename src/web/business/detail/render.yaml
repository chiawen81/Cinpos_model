services:
  # Web Service - Flask 應用
  - type: web
    name: cinpos-boxoffice-web
    env: python
    region: singapore  # 選擇新加坡節點（離台灣較近）
    plan: free

    # 建置設定
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn -w 4 -b 0.0.0.0:$PORT app:app

    # 環境變數
    envVars:
      - key: FLASK_DEBUG
        value: false
      - key: SECRET_KEY
        generateValue: true
      - key: PYTHON_VERSION
        value: 3.13

    # 健康檢查
    healthCheckPath: /

    # 自動部署設定
    autoDeploy: true

    # 靜態檔案設定（可選）
    staticPublishPath: ./static
